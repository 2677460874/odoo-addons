<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="edit_holiday_status_form" model="ir.ui.view">
        <field name="name">hr.holidays.status.request.form</field>
        <field name="model">hr.holidays.status</field>
        <field name="inherit_id" ref="hr_holidays.edit_holiday_status_form"/>
        <field name="arch" type="xml">
            <field name="limit" position="after">
                <field name="allow_modification"/>
            </field>
        </field>
    </record>

    <record id="action_view_allocation_modification_request" model="ir.actions.act_window">
        <field name="res_model">allocation.modification.request</field>
        <field name="view_type">form</field>
        <field name="name">Action Allocation Modification Request</field>
        <field name="view_mode">list,form</field>
        <field name="context">{
            'search_default_leave_id': [active_id],
            'default_leave_id':active_id,
        }
        </field>
        <field name="help" type="html">
            <p>
                The Odoo issues tacker allows you to efficiently manage things
                like internal requests, software development bugs, customer
                complaints, project troubles, material breakdowns, etc.
            </p>
        </field>
    </record>

    <record id="edit_holiday_new" model="ir.ui.view">
        <field name="name">hr.holidays.allocation.request.form</field>
        <field name="model">hr.holidays</field>
        <field name="inherit_id" ref="hr_holidays.edit_holiday_new"/>
        <field name="arch" type="xml">
            <xpath expr="//group[1]" position="before">
                <div name="button_box"
                     class="oe_button_box">
                    <button class="oe_stat_button"
                            type="action"
                            name="%(action_view_allocation_modification_request)d"
                            icon="fa-tasks"
                            attrs="{'invisible': ['|', ('allow_modification', '!=', True), ('type','!=','add')]}"
                            help="Number of Pending Request for Approval">
                        <field string="Pending approval"
                               name="request_count"
                               widget="statinfo"/>
                    </button>
                </div>
            </xpath>
            <xpath expr="//button[@name='confirm']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('allow_modification', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//button[@name='validate']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('allow_modification', '=', True)]}</attribute>
            </xpath>
            <xpath expr="//button[@name='second_validate']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('allow_modification', '=', True)]}</attribute>

            </xpath>
            <xpath expr="//button[@name='refuse']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('allow_modification', '=', True)]}</attribute>

            </xpath>
            <xpath expr="//button[@name='reset']" position="attributes">
                <attribute name="attrs">{'invisible': ['|', ('allow_modification', '=', True)]}</attribute>
            </xpath>

            <field name="department_id" position="after">
                <field name="allow_modification" invisible="1"/>
            </field>

             <field name="number_of_days_temp" position="attributes">
                <attribute name="attrs">{'readonly': [
                        '&amp;',
                        ('allow_modification', '=', True),
                        ('type','=','add')
                    ]
                    }</attribute>
             </field>


        </field>
    </record>

</odoo>
